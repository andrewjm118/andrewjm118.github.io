(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0da6"],{"9daf":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{staticStyle:{cursor:"pointer",border:"1px solid #2b2f33","background-color":"#2b2f33",position:"relative"},attrs:{id:"timeline",width:t.width,height:t.height,ondragstart:"return false;"},on:{mouseup:t.mouseupFunc,mouseout:t.mouseoutFunc,mousemove:t.mousemoveFunc,mousedown:t.mousedownFunc}})},n=[],r=(i("4160"),i("d3b7"),i("25f0"),i("159b"),{name:"time-line",props:{width:{type:String,default:"800"},height:{type:String,default:"62"},timecell:{type:Array,default:function(){return[]}}},data:function(){return{minutes_per_step:[1,2,5,10,15,20,30,60,120,180,240,360,720,1440],graduation_step:15,hours_per_ruler:24,start_timestamp:(new Date).getTime()-432e5,distance_between_gtitle:50,zoom:24,g_isMousedown:!1,g_isMousemove:!1,g_mousedownCursor:null,returnTime:null}},mounted:function(){var t=this;this.$nextTick((function(){t.canvas=document.getElementById("timeline"),t.ctx=t.canvas.getContext("2d"),t.canvasWidth=t.canvas.width,t.canvasHeight=t.canvas.height,t.init(t.start_timestamp,t.timecell,!1)}))},methods:{init:function(t,e,i){this.drawCellBg(),this.add_graduations(t),this.add_cells(e),this.drawLine(0,this.canvasHeight,this.canvasWidth,this.canvasHeight,"rgb(151, 158, 167)",1),this.drawLine(this.canvasWidth/2,0,this.canvasWidth/2,33,"rgb(64, 196, 255",2),i||this.add_events();var s=t+3600*this.hours_per_ruler*1e3/2;this.ctx.fillStyle="rgb(64, 196, 255)",this.ctx.fillText(this.changeTime(s),this.canvasWidth/2-60,50)},add_graduations:function(t){for(var e=this.canvasWidth/(60*this.hours_per_ruler),i=this.canvasWidth/(60*this.hours_per_ruler*60*1e3),s=this.graduation_step,n=s/e,r=0;r<this.minutes_per_step.length;r++)if(n<=this.minutes_per_step[r]){n=this.minutes_per_step[r],s=e*n;break}for(var a=30,o=0;o<this.minutes_per_step.length;o++)if(this.distance_between_gtitle/e<=this.minutes_per_step[o]){a=this.minutes_per_step[o];break}for(var u,l,c,h=this.canvasWidth/s,m=this.ms_to_next_step(t,60*n*1e3),_=m*i,d=s/i,g=0;g<h;g++){u=_+g*s,l=t+m+g*d;var p=new Date(l);if(0===p.getUTCHours()&&0===p.getUTCMinutes()){c=25;var v=this.graduation_title(p);this.ctx.fillText(v,u-20,30),this.ctx.fillStyle="rgba(151,158,167,1)"}else if(l/6e4%a===0){c=15;var f=this.graduation_title(p);this.ctx.fillText(f,u-20,30),this.ctx.fillStyle="rgba(151,158,167,1)"}else c=10;this.drawLine(u,0,u,c,"rgba(151,158,167,1)",1)}},drawLine:function(t,e,i,s,n,r){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,s),this.ctx.strokeStyle=n,this.ctx.lineWidth=r,this.ctx.stroke()},add_cells:function(t){var e=this;t.forEach((function(t){e.draw_cell(t)}))},draw_cell:function(t){var e=this,i=e.canvasWidth/(60*e.hours_per_ruler*60*1e3),s=(t.beginTime-e.start_timestamp)*i,n=(t.endTime-t.beginTime)*i;e.ctx.fillStyle=t.style.background,e.ctx.fillRect(s,0,n,15)},drawCellBg:function(){this.ctx.fillStyle="rgba(69, 72, 76, 0.5)",this.ctx.fillRect(0,0,this.canvasWidth,15)},add_events:function(){var t=this;t.canvas.addEventListener&&t.canvas.addEventListener("mousewheel",t.mousewheelFunc.bind(t))},mousedownFunc:function(t){this.g_isMousedown=!0,this.g_mousedownCursor=this.get_cursor_x_position(t,!0)},mousemoveFunc:function(t){var e=this,i=e.get_cursor_x_position(t,!0),s=e.canvasWidth/(60*e.hours_per_ruler*60*1e3);if(e.clearCanvas(),e.g_isMousedown){var n=i-e.g_mousedownCursor;e.start_timestamp=e.start_timestamp-Math.round(n/s),e.init(e.start_timestamp,e.timecell,!0),e.g_isMousemove=!0,e.g_mousedownCursor=i}else{var r=e.start_timestamp+i/s;e.init(e.start_timestamp,e.timecell,!0),e.drawLine(i,0,i,50,"rgb(194, 202, 215)",1),e.ctx.fillStyle="rgb(194, 202, 215)",e.ctx.fillText(e.changeTime(r),i-50,60)}},mouseupFunc:function(t){var e=this;if(e.g_isMousemove)e.g_isMousemove=!1,e.g_isMousedown=!1,e.returnTime=e.start_timestamp+3600*e.hours_per_ruler*1e3/2;else{e.g_isMousedown=!1;var i=e.get_cursor_x_position(t,!0),s=3600*e.zoom*1e3/e.canvasWidth;e.returnTime=e.start_timestamp+i*s,e.set_time_to_middle(e.returnTime)}this.$emit("mouseupFunc",e.returnTime)},mouseoutFunc:function(){var t=this;t.clearCanvas(),t.init(t.start_timestamp,t.timecell,!0)},mousewheelFunc:function(t){var e=this;if(!t||!t.preventDefault)return window.event.returnValue=!1,!1;t.preventDefault();var i=window.event||t,s=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail)),n=e.start_timestamp+3600*e.hours_per_ruler*1e3/2;s<0?(e.zoom=e.zoom+4,e.zoom>=24&&(e.zoom=24),e.hours_per_ruler=e.zoom):s>0&&(e.zoom=e.zoom-4,e.zoom<=1&&(e.zoom=1),e.hours_per_ruler=e.zoom),e.clearCanvas(),e.start_timestamp=n-3600*e.hours_per_ruler*1e3/2,e.init(e.start_timestamp,e.timecell,!0)},get_cursor_x_position:function(t,e){var i=0;return t||(t=window.event),e?i=t.offsetX:t.pageX||t.pageY?i=t.pageX:(t.clientX||t.clientY)&&(i=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),i},graduation_title:function(t){return 0===t.getHours()&&0===t.getMinutes()&&0===t.getMilliseconds()?("0"+t.getDate().toString()).substr(-2)+"."+("0"+(t.getMonth()+1).toString()).substr(-2)+"."+t.getFullYear():t.getHours()+":"+("0"+t.getMinutes().toString()).substr(-2)},ms_to_next_step:function(t,e){var i=t%e;return i?e-i:0},set_time_to_middle:function(t){this.clearCanvas(),this.start_timestamp=t-60*this.hours_per_ruler*60*1e3/2,this.init(this.start_timestamp,this.timecell,!0)},returnMouseupTime:function(t){var e=this;null!=e.returnTime&&t&&t(e.returnTime)},clearCanvas:function(){this.ctx.clearRect(0,0,1500,150)},changeTime:function(t){var e=new Date(t),i=e.getFullYear(),s=e.getMonth()+1;s<10&&(s="0"+s);var n=e.getDate();n<10&&(n="0"+n);var r=e.getHours();r<10&&(r="0"+r);var a=e.getMinutes();a<10&&(a="0"+a);var o=e.getSeconds();return o<10&&(o="0"+o),i+"-"+s+"-"+n+" "+r+":"+a+":"+o},play:function(t){this.set_time_to_middle(t)},loadVideoClip:function(t,e,i){this.clearCanvas(),this.init(t,e,i)}}}),a=r,o=i("2877"),u=Object(o["a"])(a,s,n,!1,null,null,null);e["default"]=u.exports}}]);